<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sliding Gallery</title>

    <style>
      :root {
        --bg: #070b14;
        --cardW: 280px;
        --cardH: 380px;
        --radius: 18px;
        --speed: 85;
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; margin: 0; }

      body {
        background:
          radial-gradient(900px 520px at 50% 32%, rgba(90,110,170,0.22), transparent 60%),
          linear-gradient(180deg, #050713, var(--bg));
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
        color: white;
        overflow: hidden;
        display: grid;
        place-items: center;
      }

      .stage {
        width: min(1200px, 96vw);
        height: 560px;
        position: relative;
      }

      .stage::before,
      .stage::after {
        content: "";
        position: absolute;
        top: 0;
        height: 100%;
        width: 22%;
        z-index: 5;
        pointer-events: none;
      }
      .stage::before {
        left: 0;
        background: linear-gradient(90deg, rgba(5,7,12,0.98), rgba(5,7,12,0));
      }
      .stage::after {
        right: 0;
        background: linear-gradient(270deg, rgba(5,7,12,0.98), rgba(5,7,12,0));
      }

      .track {
        position: relative;
        width: 100%;
        height: 100%;
      }

      .card {
        position: absolute;
        top: 50%;
        left: 50%;
        width: var(--cardW);
        transform-origin: center center;
        will-change: transform, opacity;
        filter: drop-shadow(0 30px 90px rgba(0,0,0,0.55));
        text-align: center;
      }

      .image {
        width: 100%;
        height: var(--cardH);
        border-radius: var(--radius);
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.14);
        background: rgba(255,255,255,0.05);
      }

      .image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .text {
        margin-top: 10px;
        line-height: 1.2;
      }

      .name {
        font-size: 15px;
        font-weight: 700;
        letter-spacing: 0.3px;
      }

      .years {
        margin-top: 4px;
        font-size: 12px;
        letter-spacing: 0.4px;
        opacity: 0.8; /* IMPORTANT: more visible */
      }

      @media (max-width: 760px) {
        :root {
          --cardW: 220px;
          --cardH: 300px;
        }
      }
    </style>
  </head>

  <body>
    <div class="stage" id="stage">
      <div class="track" id="track"></div>
    </div>

    <script>
      const slides = [
        {
          name: "Alton C Rowe, Sr.",
          years: "1911-1933",
          src: "images/Alton Rowe Sr.JPEG",
        },
        {
          name: "F. Harris Patterson",
          years: "1934-1939",
          src: "images/F. Harris Patterson.JPEG",
        },
        {
          name: "Bradford B. Banfield",
          years: "1939-1944",
          src: "images/Bradford Banfield.JPEG",
        },
      ];

      const track = document.getElementById("track");
      const stage = document.getElementById("stage");

      const CARD_COUNT = Math.max(slides.length, 7);
      let spacing = 320;
      let speed = Number(getComputedStyle(document.documentElement)
        .getPropertyValue("--speed")) || 85;

      function exitX() {
        return stage.clientWidth / 2 + spacing * 1.2;
      }

      const cards = [];

      for (let i = 0; i < CARD_COUNT; i++) {
        const slide = slides[i % slides.length];

        const card = document.createElement("div");
        card.className = "card";

        const image = document.createElement("div");
        image.className = "image";

        const img = document.createElement("img");
        img.src = slide.src;
        img.alt = slide.name;

        const text = document.createElement("div");
        text.className = "text";

        const name = document.createElement("div");
        name.className = "name";
        name.textContent = slide.name;

        const years = document.createElement("div");
        years.className = "years";
        years.textContent = slide.years;

        image.appendChild(img);
        text.appendChild(name);
        text.appendChild(years);
        card.appendChild(image);
        card.appendChild(text);
        track.appendChild(card);

        cards.push({ el: card, x: 0, index: i % slides.length });
      }

      function reset() {
        spacing = Math.min(360, Math.max(260, stage.clientWidth / 3));
        const start = -exitX() - spacing * 2;
        cards.forEach((c, i) => c.x = start + i * spacing);
      }

      function clamp(v, a, b) {
        return Math.max(a, Math.min(b, v));
      }

      function styleFromX(x) {
        const e = exitX();
        const t = 1 - clamp(Math.abs(x) / e, 0, 1);
        const ease = t * t * t;

        return {
          scale: 0.75 + ease * 0.55,
          opacity: 0.2 + ease * 0.8,
          z: Math.round(ease * 1000),
        };
      }

      let last = performance.now();

      function tick(now) {
        const dt = (now - last) / 1000;
        last = now;

        for (const c of cards) {
          c.x += speed * dt;

          if (c.x > exitX() + spacing) {
            const minX = Math.min(...cards.map(k => k.x));
            c.x = minX - spacing;

            c.index = (c.index + cards.length) % slides.length;
            const slide = slides[c.index];

            c.el.querySelector("img").src = slide.src;
            c.el.querySelector(".name").textContent = slide.name;
            c.el.querySelector(".years").textContent = slide.years;
          }

          const { scale, opacity, z } = styleFromX(c.x);
          c.el.style.zIndex = z;
          c.el.style.opacity = opacity;
          c.el.style.transform =
            `translate(calc(-50% + ${c.x}px), -50%) scale(${scale})`;
        }

        requestAnimationFrame(tick);
      }

      window.addEventListener("resize", reset);
      reset();
      requestAnimationFrame(tick);
    </script>
  </body>
</html>
